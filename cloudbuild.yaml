steps:
# - name: 'gcr.io/kaniko-project/executor:latest'
#   args:
#   - --destination=gcr.io/$PROJECT_ID/odi:$BRANCH_NAME
#   - --cache=true
#   - --cache-ttl=48h
#   - --context=./
#   - --single-snapshot
#   id: kaniko-build
- name: 'gcr.io/$PROJECT_ID/odi:$BRANCH_NAME'
  entrypoint: ./gradlew
  args:
    - publish
    - Si
  id: build-sdk
- name: 'gcr.io/$PROJECT_ID/odi:$BRANCH_NAME'
  id: kaniko-test
timeout: 3600s
